# 📊 Архитектура Bootstrap Установщика

## Схема работы

```
┌─────────────────────────────────────────────────────────────┐
│                      ПОЛЬЗОВАТЕЛЬ                            │
│                    скачивает и запускает                     │
└──────────────────────┬──────────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────────────────────┐
│           Bootstrap Установщик (~100 МБ)                     │
│  ┌───────────────────────────────────────────────────────┐  │
│  │  🎨 Majestic Интерфейс (Electron)                     │  │
│  │                                                        │  │
│  │  ╔════════════════════════════════════════╗          │  │
│  │  ║         MAJESTIC                       ║          │  │
│  │  ║  ПОДКЛЮЧЕНИЕ К СЕРВЕРУ                 ║          │  │
│  │  ║  ЗАГРУЗКА ФАЙЛОВ...                    ║          │  │
│  │  ║  ████████████░░░░░░░░ 60%              ║          │  │
│  │  ║  150.5 МБ из 250 МБ                    ║          │  │
│  │  ╚════════════════════════════════════════╝          │  │
│  │                                                        │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                              │
│  Функции:                                                    │
│  • Подключение к серверу                                    │
│  • Загрузка полного установщика                             │
│  • Отображение красивого прогресса                          │
│  • Автоматический запуск установщика                        │
└──────────────────────┬──────────────────────────────────────┘
                       │
                       │ скачивает с сервера
                       ▼
┌─────────────────────────────────────────────────────────────┐
│                 ВАШ СЕРВЕР                                   │
│  https://your-domain.com/reduxion/launcher/                  │
│                                                              │
│  📦 Reduxion-Launcher-Setup.exe (~300-500 МБ)               │
│                                                              │
└──────────────────────┬──────────────────────────────────────┘
                       │
                       │ загружает в temp
                       ▼
┌─────────────────────────────────────────────────────────────┐
│          Полный Установщик (~300-500 МБ)                     │
│  ┌───────────────────────────────────────────────────────┐  │
│  │  🎨 Majestic Интерфейс (Electron)                     │  │
│  │                                                        │  │
│  │  ╔════════════════════════════════════════╗          │  │
│  │  ║         MAJESTIC                       ║          │  │
│  │  ║  УСТАНОВКА ЛАУНЧЕРА                    ║          │  │
│  │  ║  КОПИРОВАНИЕ ФАЙЛОВ...                 ║          │  │
│  │  ║  ████████████████████ 100%             ║          │  │
│  │  ║  Установка завершена                   ║          │  │
│  │  ╚════════════════════════════════════════╝          │  │
│  │                                                        │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                              │
│  Функции:                                                    │
│  • Выбор папки установки                                    │
│  • Копирование файлов лаунчера                              │
│  • Создание ярлыков                                         │
│  • Запуск установленного лаунчера                           │
└──────────────────────┬──────────────────────────────────────┘
                       │
                       │ устанавливает
                       ▼
┌─────────────────────────────────────────────────────────────┐
│            Установленный Лаунчер                             │
│  📁 C:\Users\Username\Reduxion Launcher\                    │
│                                                              │
│  • Reduxion Launcher.exe                                    │
│  • Все файлы приложения                                     │
│  • Ярлыки на рабочем столе и в меню Пуск                   │
└─────────────────────────────────────────────────────────────┘
```

## Сравнение с NSIS Web

### ❌ СТАРЫЙ СПОСОБ (NSIS Web):

```
Пользователь
    ↓
[Некрасивый NSIS установщик] (~5 МБ)
    ↓
Скачивает .7z файлы
    ↓
Распаковывает
    ↓
Устанавливает
```

**Проблемы:**
- Некрасивый стандартный интерфейс
- Нет анимаций
- Базовый прогресс бар
- Ограниченная кастомизация

### ✅ НОВЫЙ СПОСОБ (Bootstrap на Electron):

```
Пользователь
    ↓
[Красивый Majestic Bootstrap] (~100 МБ)
    ↓
Скачивает полный установщик.exe
    ↓
Запускает его автоматически
    ↓
[Красивый Majestic Установщик]
    ↓
Устанавливает лаунчер
```

**Преимущества:**
- ✅ Оригинальный Majestic дизайн
- ✅ Красивые анимации
- ✅ Детальный прогресс
- ✅ Полная кастомизация

## Файлы проекта

```
reduxion-launcher/
│
├─ 📄 bootstrap-installer-main.js      ← Логика Electron
├─ 📄 bootstrap-installer.html         ← Интерфейс Majestic
├─ 📄 electron-builder-bootstrap.yml   ← Конфигурация сборки
├─ 📄 package-bootstrap.json           ← Зависимости
│
├─ 🔨 СОЗДАТЬ-NSIS-ВЕБ-УСТАНОВЩИК.bat ← Сборка bootstrap
├─ 🔨 ТЕСТ-BOOTSTRAP.bat               ← Тестирование
│
├─ 📖 BOOTSTRAP-README.md              ← Документация
└─ 📖 BOOTSTRAP-QUICK-START.md         ← Быстрый старт
```

## Процесс сборки

```
┌──────────────────────────────────────┐
│  1. Запуск bat-файла                 │
│     СОЗДАТЬ-NSIS-ВЕБ-УСТАНОВЩИК.bat │
└─────────────┬────────────────────────┘
              │
              ▼
┌──────────────────────────────────────┐
│  2. Копирование конфигурации         │
│     package-bootstrap.json → package.json │
└─────────────┬────────────────────────┘
              │
              ▼
┌──────────────────────────────────────┐
│  3. Очистка кеша electron-builder    │
└─────────────┬────────────────────────┘
              │
              ▼
┌──────────────────────────────────────┐
│  4. Сборка через electron-builder    │
│     • Упаковка Electron               │
│     • Создание NSIS установщика       │
│     • Оптимизация размера             │
└─────────────┬────────────────────────┘
              │
              ▼
┌──────────────────────────────────────┐
│  5. Результат                         │
│     bootstrap-dist/                   │
│       └─ Reduxion-Bootstrap-Setup.exe│
└──────────────────────────────────────┘
```

## Размеры файлов

| Компонент | Размер | Описание |
|-----------|--------|----------|
| Bootstrap | ~100-150 МБ | Маленький установщик с интерфейсом |
| Полный установщик | ~300-500 МБ | Содержит все файлы лаунчера |
| Установленный лаунчер | ~200-400 МБ | На диске пользователя |

## Время выполнения

| Этап | Время | Описание |
|------|-------|----------|
| Запуск bootstrap | 1-2 сек | Открытие окна |
| Подключение к серверу | 1-3 сек | Проверка доступности |
| Загрузка установщика | 30-120 сек | Зависит от скорости интернета |
| Запуск установщика | 2-3 сек | Автоматический запуск |
| Установка лаунчера | 10-30 сек | Копирование файлов |

## Поток данных

```
        Интернет
           │
           ▼
    ┌──────────────┐
    │   Сервер     │
    │              │
    │ 📦 Setup.exe │
    └──────┬───────┘
           │ HTTPS
           │ GET Request
           ▼
    ┌──────────────┐
    │  Bootstrap   │◄──── Показывает прогресс
    │              │
    │ 📥 Загрузка  │
    └──────┬───────┘
           │
           │ Сохраняет в Temp
           ▼
    ┌──────────────┐
    │   C:\Temp\   │
    │              │
    │ 💾 Setup.exe │
    └──────┬───────┘
           │
           │ Запускает
           ▼
    ┌──────────────┐
    │ Установщик   │◄──── Показывает прогресс
    │              │
    │ 📦 Установка │
    └──────┬───────┘
           │
           │ Копирует файлы
           ▼
    ┌──────────────┐
    │ C:\Users\... │
    │              │
    │ 🚀 Лаунчер   │
    └──────────────┘
```

---

**Создано для Reduxion Team**  
*Архитектура Bootstrap Установщика*
