# Инструкция по загрузке файлов редуксов

## Структура системы загрузки

Система автоматически:
1. **Скачивает** .zip архив с редуксом
2. **Сохраняет** в менеджер загрузок (показывает прогресс)
3. **Распаковывает** во временную папку
4. **Устанавливает** файлы в GTA 5
5. **Создает бэкапы** оригинальных файлов
6. **Удаляет** временные файлы

## Куда загружать файлы редуксов?

### Вариант 1: GitHub Releases (Рекомендуется)
Создайте релизы в репозитории и загружайте .zip файлы туда:

```
https://github.com/tumbwumba-dot/launcherlaunceherlalalasllasldla/releases
```

Преимущества:
- Бесплатный хостинг
- Неограниченная пропускная способность
- Поддержка больших файлов
- Автоматический CDN

### Вариант 2: Собственный сервер
Разместите файлы на веб-сервере с прямыми ссылками.

### Вариант 3: Google Drive / Dropbox
Используйте прямые ссылки на скачивание.

## Формат ссылки в базе данных редуксов

В `modern-launcher.html` в массиве `reduxesDatabase` добавьте поле `downloadUrl`:

```javascript
const reduxesDatabase = [
    {
        id: 'panamera-redux',
        name: 'Panamera REDUX',
        description: 'Полный пакет улучшений интерфейса...',
        category: 'interface',
        installed: false,
        videoUrl: 'https://www.youtube.com/embed/9OjQg3GOHCA',
        downloadUrl: 'https://github.com/.../panamera-redux.zip',  // Поддерживается: .zip, .rar, .7z
        features: [
            'Залазы',
            'Кастом Звуки',
            // ...
        ]
    }
];
```

### Поддерживаемые форматы архивов:
- ✅ `.zip` - основной формат (adm-zip)
- ✅ `.rar` - поддержка RAR архивов (node-unrar-js)
- ✅ `.7z` - поддержка 7-Zip (node-7z)

Система автоматически определяет тип архива по расширению в URL.

## Структура .zip архива редукса

### Вариант 1: С файлом install.json (Рекомендуется)
```
panamera-redux.zip
├── install.json          # Карта установки
├── files/
│   ├── hud.ytd          # Файлы редукса
│   ├── sounds/
│   └── ...
```

**install.json:**
```json
{
    "name": "Panamera REDUX",
    "version": "1.0.0",
    "files": {
        "files/hud.ytd": "x64/data/cdimages/scaleform_generic.rpf/hud.ytd",
        "files/sounds/weapon_sounds.dat54": "x64/audio/sfx/RESIDENT.rpf/weapon_sounds.dat54"
    }
}
```

### Вариант 2: Автоматическая установка
Структура папок должна совпадать со структурой GTA:

```
panamera-redux.zip
├── x64/
│   ├── data/
│   │   └── cdimages/
│   │       └── scaleform_generic.rpf/
│   │           └── hud.ytd
│   └── audio/
│       └── sfx/
│           └── RESIDENT.rpf/
│               └── weapon_sounds.dat54
├── common.rpf/
│   └── ...
└── ScriptHookV.asi      # .asi/.dll файлы в корне
```

### Вариант 3: Простая структура (для мелких модов)
```
simple-mod.zip
├── mod_file1.asi
├── mod_file2.dll
└── config.ini
```

Файлы .asi, .dll, .ini из корня автоматически копируются в корень GTA.

## Как работает система установки

### 1. Загрузка
- Файл скачивается в `%TEMP%/reduxion-downloads/`
- Показывается прогресс (проценты, скорость, размер)
- Можно отменить загрузку

### 2. Установка
- Архив распаковывается во временную папку
- Система ищет `install.json` для точной установки
- Если нет `install.json` - автоматически определяет структуру
- Создаются бэкапы: `filename.ext.reduxion_backup`
- Файлы копируются в GTA

### 3. Удаление
- Восстанавливаются оригинальные файлы из бэкапов
- Удаляется папка редукса из `GTA5/reduxion_mods/`

## Где хранятся установленные редуксы

```
C:/Program Files/Rockstar Games/Grand Theft Auto V/
├── reduxion_mods/           # Папка с редуксами
│   ├── panamera-redux/      # Оригинальные файлы редукса
│   ├── another-mod/
│   └── ...
├── x64/                     # Установленные файлы
├── *.asi                    # Моды в корне
└── GTA5.exe.reduxion_backup # Бэкапы
```

## Пример создания редукса для загрузки

### 1. Соберите файлы мода
```bash
mkdir panamera-redux
# Скопируйте файлы мода в panamera-redux/
```

### 2. Создайте install.json (опционально)
```json
{
    "name": "Panamera REDUX",
    "version": "1.0.0",
    "files": {
        "hud.ytd": "x64/data/cdimages/scaleform_generic.rpf/hud.ytd",
        "sounds/weapon.dat": "x64/audio/sfx/RESIDENT.rpf/weapon.dat"
    }
}
```

### 3. Упакуйте в архив (.zip, .rar или .7z)
```bash
# Используйте любой удобный формат:
zip -r panamera-redux.zip panamera-redux/
# или
rar a panamera-redux.rar panamera-redux/
# или
7z a panamera-redux.7z panamera-redux/
```

### 4. Загрузите на GitHub Release
- Перейдите в Releases
- Create new release
- Загрузите `panamera-redux.zip`
- Скопируйте прямую ссылку на файл

### 5. Добавьте в лаунчер
В `modern-launcher.html`:
```javascript
{
    id: 'panamera-redux',
    name: 'Panamera REDUX',
    downloadUrl: 'ССЫЛКА_НА_ВАШ_ФАЙЛ.zip',
    // ...
}
```

## Готово!

Теперь при нажатии "Установить":
1. Файл добавится в менеджер загрузок
2. Начнется скачивание с прогрессом
3. После загрузки автоматически установится
4. Статус изменится на "Установлено"

## Тестирование

1. Создайте тестовый .zip с простым файлом
2. Загрузите на GitHub Release
3. Добавьте `downloadUrl` в базу редуксов
4. Пересоберите лаунчер
5. Нажмите "Установить" и проверьте работу

## Поддержка

Система автоматически:
- ✅ Создает бэкапы
- ✅ Показывает прогресс
- ✅ Обрабатывает ошибки
- ✅ Поддерживает отмену
- ✅ Восстанавливает файлы при удалении
- ✅ Работает с любой структурой архива
